include:
  - project: "devops/gitlab/ci-templates/ruby"
    ref: "sans-dind"
    file:
      - ".rspec.yml"
      - ".rubocop.yml"
  - template: "Workflows/MergeRequest-Pipelines.gitlab-ci.yml"

stages:
  - test

rspec_app_test:
  stage: test
  image: ruby:3.2.2
  before_script:
    - bundle config set --local deployment true  # Install dependencies into ./vendor/ruby
    - bundle install -j $(nproc)
  extends:
    - .rspec
  tags:
    - build

rubocop_app_test:
  stage: test
  image: ruby:3.2.2
  before_script:
    - bundle config set --local deployment true  # Install dependencies into ./vendor/ruby
    - bundle install -j $(nproc)
  extends:
    - .rubocop
  tags:
    - build